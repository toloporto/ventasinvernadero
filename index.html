<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Cultivos - Invernadero</title>
    <link rel="stylesheet" href="styles.css"> 
    </head>
<body>

    <div id="auth-container" class="card" style="max-width: 400px; margin: 50px auto;">
        <h2>Bienvenido/a al Gestor de Cultivos</h2>
        
        <section class="form-section">
            <h3>Iniciar Sesi√≥n</h3>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-usuario">Usuario:</label>
                    <input type="text" id="login-usuario" required>
                </div>
                <div class="form-group">
                    <label for="login-contrase√±a">Contrase√±a:</label>
                    <input type="password" id="login-contrase√±a" required>
                </div>
                <button type="submit" id="login-button">Acceder</button>
            </form>
        </section>

        <hr style="border-color: #444;">

        <section class="form-section">
            <h3>Registrarse (Primer Uso)</h3>
            <form id="registro-form">
                <div class="form-group">
                    <label for="registro-usuario">Usuario:</label>
                    <input type="text" id="registro-usuario" required>
                </div>
                <div class="form-group">
                    <label for="registro-contrase√±a">Contrase√±a:</label>
                    <input type="password" id="registro-contrase√±a" required>
                </div>
                <button type="submit" id="registro-button">Registrarme</button>
            </form>
        </section>
        <p id="auth-message" style="margin-top: 10px;"></p>
    </div>
    
    <div id="dashboard-container" style="display: none; width: 100%;"> 
        
        <header>
            <h1>Gesti√≥n de Cultivos en Invernadero</h1>
            <button id="logout-button" style="float: right; margin-top: -40px;">Cerrar Sesi√≥n</button>
        </header>

        <main>

            <section class="card" id="resumen-financiero">
                <h2>Indicadores Clave de Rendimiento</h2>
                <div class="kpis">
                    <div class="kpi-item">
                        <h3>Costo Total Invertido</h3>
                        <p id="kpiCosto">‚Ç¨0.00</p>
                    </div>
                    <div class="kpi-item">
                        <h3>Venta Potencial Estimada</h3>
                        <p id="kpiVenta">‚Ç¨0.00</p>
                    </div>
                    <div class="kpi-item profit">
                        <h3>Ganancia Potencial</h3>
                        <p id="kpiGanancia">‚Ç¨0.00</p>
                    </div>
                    <div class="kpi-cards">
                        <div class="card chart-card">
                            <h3>üìä Top 5: Proyecci√≥n de Ganancia</h3>
                            <canvas id="gananciaChart"></canvas> 
                         </div>

                    </div>
            </section>

            <section class="card" id="form-section">
                <h2>A√±adir o Editar Cultivo</h2>
                <form id="cultivoForm">
                    <input type="hidden" id="cultivoNombreOriginal">
                    
                    <div class="form-group">
                        <label for="nombre">Nombre del Cultivo:</label>
                        <input type="text" id="nombre" required>
                    </div>
                    <div class="form-group">
                        <label for="zona">Zona / Lote:</label>
                        <input type="text" id="zona" required>
                    </div>
                    
                    <div class="split">
                        <div class="form-group">
                            <label for="fecha_siembra">Fecha de Siembra:</label>
                            <input type="date" id="fecha_siembra" required>
                        </div>
                        <div class="form-group">
                            <label for="fecha_cosecha">Fecha de Cosecha (Estimada):</label>
                            <input type="date" id="fecha_cosecha" required>
                        </div>
                    </div>

                    <div class="split">
                        <div class="form-group">
                            <label for="precio_compra">Costo Inversi√≥n (‚Ç¨):</label>
                            <input type="number" id="precio_compra" value="0.00" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="precio_venta">Precio Venta Est. (‚Ç¨):</label>
                            <input type="number" id="precio_venta" value="0.00" step="0.01" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="dias_alerta">D√≠as para Alerta de Cosecha:</label>
                        <input type="number" id="dias_alerta" value="7" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="notas">Notas:</label>
                        <textarea id="notas"></textarea>
                    </div>
                    
                    <button type="submit" id="submitButton">A√±adir Cultivo</button>
                    </form>
            </section>

            <section class="card" id="list-section">
                <h2>Listado de Cultivos</h2>
                <div class="search-bar" id="search-container">
                    <input type="text" id="cultivoSearch" placeholder="Buscar por nombre, zona o notas...">
                    <span id="loading-message"></span>
                </div>
                
                <table class="cultivo-table" id="cultivoTable">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Zona</th>
                            <th>Siembra</th>
                            <th>Cosecha Est.</th>
                            <th>Faltan (D√≠as)</th>
                            <th>Margen (‚Ç¨)</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="cultivoList">
                        </tbody>
                </table>
            </section>

        </main> <footer>
            <p>&copy; 2025 Gestor de Cultivos - Invernadero</p>
        </footer>

    </div> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="scripts.js"></script>
</body>
</html>